(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{481:function(s,t,a){"use strict";a.r(t);var n=a(10),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"索引节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#索引节点"}},[s._v("#")]),s._v(" 索引节点")]),s._v(" "),a("p",[s._v("在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)，可以通过 ls -li 查看每个文件的索引节点：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -li\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8758859")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("364")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":57 bufio_read.go\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7957721")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("383")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":30 bufio_scann.go\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10097171")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("225")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04 deferTest.go\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10164017")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("464")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":43 inToOut.go\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8751290")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("276")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":13 scanfTest.go\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7173127")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("338")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":45 t1.go\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7173519")]),s._v(" -rw-r--r--@ "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1520")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":59 test.go\n")])])]),a("h1",{attrs:{id:"硬链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#硬链接"}},[s._v("#")]),s._v(" 硬链接")]),s._v(" "),a("p",[s._v("基本命令：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" f1 f2  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建f1的一个硬连接文件f2")]),s._v("\n")])])]),a("p",[a("strong",[s._v("硬链接")]),s._v("可以简单把它想成 C 语言中的指针，它指向了物理硬盘的一个区块，多个硬链接会指向同一个区块，（可以理解为 C 中的多个指针指向了同一块内存空间）。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" f "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个文件并向其写入内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" f hard_f                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 f 的第一条硬链接 hard_f")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" f hard_f1                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 f 的第二条硬链接 hard_f1")]),s._v("\n\nll -i\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10966044")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" zz  staff     6B  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":52 f\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10966044")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" zz  staff     6B  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":52 hard_f\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10966044")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" zz  staff     6B  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":52 hard_f1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 两个硬链接的 inode index 与源文件相同")]),s._v("\n")])])]),a("p",[s._v("因为指向的是同一个硬盘区块，所以通过硬链接更改文件内容时，会导致其他的硬链接及源文件也被更改：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" f hard_f hard_f1     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出三个文件的初始值")]),s._v("\nhello\nhello\nhello\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" hard_f      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 hard_f 的内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" f hard_f hard_f1     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 三个文件的值已经全部更改了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n")])])]),a("p",[s._v("事实上文件系统会维护一个引用计数，只要有文件指向这个区块，它就不会从硬盘上消失。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" f                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除源文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" hard_f hard_f1     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试输出两个链接文件的内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 硬链接文件可以正常输出")]),s._v("\n\n")])])]),a("p",[s._v("硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。")]),s._v(" "),a("h1",{attrs:{id:"软链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软链接"}},[s._v("#")]),s._v(" 软链接")]),s._v(" "),a("p",[s._v("基本命令：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s f1 soft\n")])])]),a("p",[a("strong",[s._v("软链接")]),s._v("也称之为符号连接（Symbolic Link），软链接文件有类似于Windows的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个"),a("strong",[s._v("文本文件")]),s._v("，其中包含有另一文件的"),a("strong",[s._v("位置信息")]),s._v("，在硬盘上有独立的区块，访问时替换自身路径。")]),s._v(" "),a("p",[s._v("与硬链接不同，软链接的 inode_index 与源文件是不同的，每个软链接的  inode_index 也不同，如下：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s f soft_f1\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建两个软链接")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s f soft_f2\nll -i\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10973146")]),s._v(" -rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff     4B  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":19 f\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10973197")]),s._v(" lrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff     1B  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":19 soft_f1 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10973203")]),s._v(" lrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zz  staff     1B  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":20 soft_f2 -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" f\n")])])]),a("p",[s._v("软链接的显示形式也比较特殊，为 软链接文件 -> 源文件。")]),s._v(" "),a("p",[s._v("删除源文件后，所有关联的的软链接文件仍然存在（因为两个是不同的文件），但指向的是一个无效的链接：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" f\t\t\t\t\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除源文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" soft_f1 soft_f2\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试输出两个软链接文件")]),s._v("\ncat: soft_f1: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无法输出内容：找不到文件")]),s._v("\ncat: soft_f2: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n")])])]),a("h1",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("硬链接是指针，所有的硬链接都是指向同一个磁盘块。 删除一个指针不会真正删除文件，只有把所有的指针都删除才会真正删除文件。 软连接是另外一种类型的文件，保存的是它指向文件的全路径， 访问时会替换成绝对路径")]),s._v(" "),a("Vssue",{attrs:{title:s.$title}})],1)}),[],!1,null,null,null);t.default=r.exports}}]);